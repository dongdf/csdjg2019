webpackJsonp([5],{"9Xvl":function(t,e,n){"use strict";e.b=function(t,e){for(let n=0;n<e.length;n++)if(t===e[n])return!0;return!1},n.d(e,"a",function(){return a});const i=n("7+uW").default.prototype.$isServer;!i&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver);function a(t,e,n){n="string"==typeof e?[e]:e;let i=t.$parent,a=i.$options.name;for(;i&&(!a||n.indexOf(a)<0);)(i=i.$parent)&&(a=i.$options.name);return i}},K4R9:function(t,e,n){n("NA/8"),t.exports=n("FeBl").Number.isNaN},MICi:function(t,e,n){t.exports={default:n("K4R9"),__esModule:!0}},"NA/8":function(t,e,n){var i=n("kM2E");i(i.S,"Number",{isNaN:function(t){return t!=t}})},S6rF:function(t,e){},VrLL:function(t,e,n){"use strict";var i=n("MICi"),a=n.n(i),o=n("bOdI"),r=n.n(o),s=n("9Xvl");const l="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",c=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let u,p={};function d(t,e=null,n=null,i=!1){u||(u=document.createElement("textarea"),document.body.appendChild(u)),t.getAttribute("wrap")?u.setAttribute("wrap",t.getAttribute("wrap")):u.removeAttribute("wrap");let{paddingSize:a,borderSize:o,boxSizing:r,sizingStyle:s}=function(t,e=!1){const n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&p[n])return p[n];const i=window.getComputedStyle(t),a=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),o=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),r=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),s={sizingStyle:c.map(t=>`${t}:${i.getPropertyValue(t)}`).join(";"),paddingSize:o,borderSize:r,boxSizing:a};return e&&n&&(p[n]=s),s}(t,i);u.setAttribute("style",`${s};${l}`),u.value=t.value||t.placeholder||"";let d,h=Number.MIN_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,f=u.scrollHeight;if("border-box"===r?f+=o:"content-box"===r&&(f-=a),null!==e||null!==n){u.value=" ";let t=u.scrollHeight-a;null!==e&&(h=t*e,"border-box"===r&&(h=h+a+o),f=Math.max(h,f)),null!==n&&(m=t*n,"border-box"===r&&(m=m+a+o),d=f>m?"":"hidden",f=Math.min(m,f))}return n||(d="hidden"),{height:`${f}px`,minHeight:`${h}px`,maxHeight:`${m}px`,overflowY:d}}var h="ivu-input",m={name:"Input",mixins:[{methods:{dispatch(t,e,n){let i=this.$parent||this.$root,a=i.$options.name;for(;i&&(!a||a!==t);)(i=i.$parent)&&(a=i.$options.name);i&&i.$emit.apply(i,[e].concat(n))},broadcast(t,e,n){(function t(e,n,i){this.$children.forEach(a=>{a.$options.name===e?a.$emit.apply(a,[n].concat(i)):t.apply(a,[e,n].concat([i]))})}).call(this,t,e,n)}}}],props:{type:{validator:function(t){return Object(s.b)(t,["text","textarea","password","url","email","date"])},default:"text"},value:{type:[String,Number],default:""},size:{validator:function(t){return Object(s.b)(t,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},placeholder:{type:String,default:""},maxlength:{type:Number},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{validator:function(t){return Object(s.b)(t,["on","off"])},default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator:function(t){return Object(s.b)(t,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1}},data:function(){return{currentValue:this.value,prefixCls:h,prepend:!0,append:!0,slotReady:!1,textareaStyles:{},showPrefix:!1,showSuffix:!1}},computed:{wrapClasses:function(){var t;return["ivu-input-wrapper",(t={},r()(t,"ivu-input-wrapper-"+this.size,!!this.size),r()(t,"ivu-input-type",this.type),r()(t,"ivu-input-group",this.prepend||this.append||this.search&&this.enterButton),r()(t,"ivu-input-group-"+this.size,(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size),r()(t,"ivu-input-group-with-prepend",this.prepend),r()(t,"ivu-input-group-with-append",this.append||this.search&&this.enterButton),r()(t,"ivu-input-hide-icon",this.append),r()(t,"ivu-input-with-search",this.search&&this.enterButton),t)]},inputClasses:function(){var t;return["ivu-input",(t={},r()(t,"ivu-input-"+this.size,!!this.size),r()(t,"ivu-input-disabled",this.disabled),r()(t,"ivu-input-with-prefix",this.showPrefix),r()(t,"ivu-input-with-suffix",this.showSuffix||this.search&&!1===this.enterButton),t)]},textareaClasses:function(){return["ivu-input",r()({},"ivu-input-disabled",this.disabled)]}},methods:{handleEnter:function(t){this.$emit("on-enter",t),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown:function(t){this.$emit("on-keydown",t)},handleKeypress:function(t){this.$emit("on-keypress",t)},handleKeyup:function(t){this.$emit("on-keyup",t)},handleIconClick:function(t){this.$emit("on-click",t)},handleFocus:function(t){this.$emit("on-focus",t)},handleBlur:function(t){this.$emit("on-blur",t),Object(s.a)(this,["DatePicker","TimePicker","Cascader","Search"])||this.dispatch("FormItem","on-form-blur",this.currentValue)},handleInput:function(t){var e=t.target.value;this.number&&""!==e&&(e=a()(Number(e))?e:Number(e)),this.$emit("input",e),this.setCurrentValue(e),this.$emit("on-change",t)},handleChange:function(t){this.$emit("on-input-change",t)},setCurrentValue:function(t){var e=this;t!==this.currentValue&&(this.$nextTick(function(){e.resizeTextarea()}),this.currentValue=t,Object(s.a)(this,["DatePicker","TimePicker","Cascader","Search"])||this.dispatch("FormItem","on-form-change",t))},resizeTextarea:function(){var t=this.autosize;if(!t||"textarea"!==this.type)return!1;var e=t.minRows,n=t.maxRows;this.textareaStyles=d(this.$refs.textarea,e,n)},focus:function(){"textarea"===this.type?this.$refs.textarea.focus():this.$refs.input.focus()},blur:function(){"textarea"===this.type?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear:function(){this.$emit("input",""),this.setCurrentValue(""),this.$emit("on-change",{target:{value:""}})},handleSearch:function(){if(this.disabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)}},watch:{value:function(t){this.setCurrentValue(t)}},mounted:function(){"textarea"!==this.type?(this.prepend=void 0!==this.$slots.prepend,this.append=void 0!==this.$slots.append,this.showPrefix=""!==this.prefix||void 0!==this.$slots.prefix,this.showSuffix=""!==this.suffix||void 0!==this.$slots.suffix):(this.prepend=!1,this.append=!1),this.slotReady=!0,this.resizeTextarea()}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapClasses},["textarea"!==t.type?[t.prepend?n("div",{directives:[{name:"show",rawName:"v-show",value:t.slotReady,expression:"slotReady"}],class:[t.prefixCls+"-group-prepend"]},[t._t("prepend")],2):t._e(),t._v(" "),t.clearable&&t.currentValue?n("i",{staticClass:"ivu-icon",class:["ivu-icon-ios-close-circle",t.prefixCls+"-icon",t.prefixCls+"-icon-clear",t.prefixCls+"-icon-normal"],on:{click:t.handleClear}}):t.icon?n("i",{staticClass:"ivu-icon",class:["ivu-icon-"+t.icon,t.prefixCls+"-icon",t.prefixCls+"-icon-normal"],on:{click:t.handleIconClick}}):t.search&&!1===t.enterButton?n("i",{staticClass:"ivu-icon ivu-icon-ios-search",class:[t.prefixCls+"-icon",t.prefixCls+"-icon-normal",t.prefixCls+"-search-icon"],on:{click:t.handleSearch}}):t.showSuffix?n("span",{staticClass:"ivu-input-suffix"},[t._t("suffix",[t.suffix?n("i",{staticClass:"ivu-icon",class:["ivu-icon-"+t.suffix]}):t._e()])],2):t._e(),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.icon?t._e():n("i",{staticClass:"ivu-icon ivu-icon-ios-loading ivu-load-loop",class:[t.prefixCls+"-icon",t.prefixCls+"-icon-validate"]})]),t._v(" "),n("input",{ref:"input",class:t.inputClasses,attrs:{id:t.elementId,autocomplete:t.autocomplete,spellcheck:t.spellcheck,type:t.type,placeholder:t.placeholder,disabled:t.disabled,maxlength:t.maxlength,readonly:t.readonly,name:t.name,number:t.number,autofocus:t.autofocus},domProps:{value:t.currentValue},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleEnter(e):null},t.handleKeyup],keypress:t.handleKeypress,keydown:t.handleKeydown,focus:t.handleFocus,blur:t.handleBlur,input:t.handleInput,change:t.handleChange}}),t._v(" "),t.append?n("div",{directives:[{name:"show",rawName:"v-show",value:t.slotReady,expression:"slotReady"}],class:[t.prefixCls+"-group-append"]},[t._t("append")],2):t.search&&t.enterButton?n("div",{class:[t.prefixCls+"-group-append",t.prefixCls+"-search"],on:{click:t.handleSearch}},[!0===t.enterButton?n("i",{staticClass:"ivu-icon ivu-icon-ios-search"}):[t._v(t._s(t.enterButton))]],2):t.showPrefix?n("span",{staticClass:"ivu-input-prefix"},[t._t("prefix",[t.prefix?n("i",{staticClass:"ivu-icon",class:["ivu-icon-"+t.prefix]}):t._e()])],2):t._e()]:n("textarea",{ref:"textarea",class:t.textareaClasses,style:t.textareaStyles,attrs:{id:t.elementId,wrap:t.wrap,autocomplete:t.autocomplete,spellcheck:t.spellcheck,placeholder:t.placeholder,disabled:t.disabled,rows:t.rows,maxlength:t.maxlength,readonly:t.readonly,name:t.name,autofocus:t.autofocus},domProps:{value:t.currentValue},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleEnter(e):null},t.handleKeyup],keypress:t.handleKeypress,keydown:t.handleKeydown,focus:t.handleFocus,blur:t.handleBlur,input:t.handleInput}})],2)},staticRenderFns:[]},v=n("VU/8")(m,f,!1,null,null,null);e.a=v.exports},mYSg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("bOdI"),a=n.n(i),o={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes:function(){var t;return["ivu-icon",(t={},a()(t,"ivu-icon-"+this.type,""!==this.type),a()(t,""+this.custom,""!==this.custom),t)]},styles:function(){var t={};return this.size&&(t["font-size"]=this.size+"px"),this.color&&(t.color=this.color),t}},methods:{handleClick:function(t){this.$emit("click",t)}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:this.classes,style:this.styles,on:{click:this.handleClick}})},staticRenderFns:[]},s=n("VU/8")(o,r,!1,null,null,null).exports,l=n("9Xvl"),c={name:"Button",mixins:[{props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator:t=>Object(l.b)(t,["_blank","_self","_parent","_top"]),default:"_self"}},computed:{linkUrl(){return"string"===typeof this.to?this.to:null}},methods:{handleClick(t=!1){if(t)window.open(this.to);else{this.$router?this.replace?this.$router.replace(this.to):this.$router.push(this.to):window.location.href=this.to}},handleCheckClick(t,e=!1){if(this.to){if("_blank"===this.target)return!1;t.preventDefault(),this.handleClick(e)}}}}],components:{Icon:s},props:{type:{validator:function(t){return Object(l.b)(t,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator:function(t){return Object(l.b)(t,["circle","circle-outline"])}},size:{validator:function(t){return Object(l.b)(t,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator:function(t){return Object(l.b)(t,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},data:function(){return{showSlot:!0}},computed:{classes:function(){var t;return["ivu-btn","ivu-btn-"+this.type,(t={},a()(t,"ivu-btn-long",this.long),a()(t,"ivu-btn-"+this.shape,!!this.shape),a()(t,"ivu-btn-"+this.size,"default"!==this.size),a()(t,"ivu-btn-loading",null!=this.loading&&this.loading),a()(t,"ivu-btn-icon-only",!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading)),a()(t,"ivu-btn-ghost",this.ghost),t)]}},methods:{handleClickLink:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$emit("click",t),this.handleCheckClick(t,e)}},mounted:function(){this.showSlot=void 0!==this.$slots.default}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.to?n("a",{class:t.classes,attrs:{disabled:t.disabled,href:t.linkUrl,target:t.target},on:{click:[function(e){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;t.handleClickLink(e,!1)},function(e){if(!e.ctrlKey)return null;t.handleClickLink(e,!0)},function(e){if(!e.metaKey)return null;t.handleClickLink(e,!0)}]}},[t.loading?n("Icon",{staticClass:"ivu-load-loop",attrs:{type:"ios-loading"}}):t._e(),t._v(" "),!t.icon&&!t.customIcon||t.loading?t._e():n("Icon",{attrs:{type:t.icon,custom:t.customIcon}}),t._v(" "),t.showSlot?n("span",{ref:"slot"},[t._t("default")],2):t._e()],1):n("button",{class:t.classes,attrs:{type:t.htmlType,disabled:t.disabled},on:{click:t.handleClickLink}},[t.loading?n("Icon",{staticClass:"ivu-load-loop",attrs:{type:"ios-loading"}}):t._e(),t._v(" "),!t.icon&&!t.customIcon||t.loading?t._e():n("Icon",{attrs:{type:t.icon,custom:t.customIcon}}),t._v(" "),t.showSlot?n("span",{ref:"slot"},[t._t("default")],2):t._e()],1)},staticRenderFns:[]},p=n("VU/8")(c,u,!1,null,null,null).exports,d=n("jtoP"),h={components:{Input:n("VrLL").a,Button:p},data:function(){return{res_s:[],openType:"",valiName:"",valiCompany:"",valiCity:[],valiPhone:"",valiArea:"",valiHangye:"",formItem:{companyName:"",areas:"",selectHy:"",companyKjzz:"",companyFlag:"",contactList:[a()({contact_name:""},"contact_name","")]},pselectedTree:{},ruleValidate:{companyKjzz:[{required:!0,message:"请选择会计准则",trigger:"blur"}],companyFlag:[{required:!0,message:"请选择企业规模",trigger:"blur"}]}}},mounted:function(){var t=this;this.valiName=function(t,e,n){if(!e.trim())return n(new Error("请输入姓名"));n()},this.valiPhone=function(t,e,n){return e?/^(((14[0-9]{1})|(13[0-9]{1})|(16[0-9]{1})|(19[0-9]{1})|(17[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(e)?void n():n(new Error("请正确的手机号")):n(new Error("请输入手机号"))},this.valiCompany=function(t,e,n){if(!e.trim())return n(new Error("请输入公司名称"));n()},this.valiArea=function(e,n,i){if(0==t.res_s.length)return i(new Error("请选择公司所在地区"));i()},this.valiHangye=function(e,n,i){if(!t.selectHy)return i(new Error("请选择公司行业"));i()}},methods:{chooseTree:function(){var t=this;this.$mymsg(d.a,{data:{message:"编辑企业会将企业已生成的报告删除，继续操作请点击[确定]"},methods:{onOk:function(){t.pselectedTree=this.selectedTree,t.selectHy=this.selectedTree}}})},resetf:function(t){this.formItem={companyName:"",companyKjzz:"",contactList:[a()({contact_name:""},"contact_name","")]},this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.$http.post("financial/companyService/addCompany",{subData:{company_name:e.formItem.companyName,accountant_rule:e.formItem.companyKjzz,contactList:e.formItem.contactList,industry_id:e.pselectedTree.id,company_flag:e.formItem.companyFlag,area1:e.res_s[0].code,area2:e.res_s[1].code}}).then(function(t){e.$Message.success("保存成功!"),e.formItem={companyName:"",companyKjzz:"",contactList:[a()({contact_name:""},"contact_name","")]}}):e.$Message.error("提交失败，请查看原因!")})},handleAdd:function(){this.formItem.contactList.push({contact_name:"",contact_phone:""})},delRows:function(t){this.formItem.contactList.splice(t,1)}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{staticStyle:{"border-bottom":"2px solid #EEE","padding-bottom":"10px"}},[n("Col",{attrs:{span:"18"}},[n("div",{staticClass:"cpageTitle"},[n("Icon",{attrs:{size:"20",type:"md-add"}}),n("span",[t._v("添加企业")])],1)]),t._v(" "),n("Col",{staticStyle:{"text-align":"right"},attrs:{span:"6"}})],1),t._v(" "),n("div",{staticClass:"formdata"},[n("Form",{ref:"formValidate",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":80}},[n("FormItem",{attrs:{label:"企业名称",prop:"companyName",rules:{required:!0,validator:t.valiCompany,trigger:"blur"}}},[n("Input",{attrs:{placeholder:"请输入企业名称"},model:{value:t.formItem.companyName,callback:function(e){t.$set(t.formItem,"companyName",e)},expression:"formItem.companyName"}})],1),t._v(" "),n("FormItem",{attrs:{label:"会计准则",prop:"companyKjzz"}},[n("Select",{model:{value:t.formItem.companyKjzz,callback:function(e){t.$set(t.formItem,"companyKjzz",e)},expression:"formItem.companyKjzz"}},[n("Option",{attrs:{value:"1"}},[t._v("企业会计准则企业")]),t._v(" "),n("Option",{attrs:{value:"2"}},[t._v("小企业会计准则企业")])],1)],1),t._v(" "),n("FormItem",{attrs:{label:"企业规模",prop:"companyFlag"}},[n("Select",{model:{value:t.formItem.companyFlag,callback:function(e){t.$set(t.formItem,"companyFlag",e)},expression:"formItem.companyFlag"}},[n("Option",{attrs:{value:"1"}},[t._v("一般纳税人")]),t._v(" "),n("Option",{attrs:{value:"2"}},[t._v("小规模")])],1)],1),t._v(" "),n("FormItem",{attrs:{label:"所属地区",prop:"areas",rules:{required:!0,validator:t.valiArea,trigger:"blur"}}},[n("al-cascader",{attrs:{level:"1"},model:{value:t.res_s,callback:function(e){t.res_s=e},expression:"res_s"}})],1),t._v(" "),n("FormItem",{attrs:{label:"所属行业",prop:"selectHy",rules:{required:!0,validator:t.valiHangye,trigger:"blur"}}},[n("Button",{nativeOn:{click:function(e){return t.chooseTree(e)}}},[t._v("点击选择")]),n("span",[n("b",{staticStyle:{color:"#08F","margin-left":"10px"}},[t._v(t._s(t.pselectedTree.name?t.pselectedTree.name:""))]),t._v("  "),n("i",{staticStyle:{"font-weight":"normal",color:"#CCC"}},[t._v("选择行业计算更精准")])])],1),t._v(" "),t._l(t.formItem.contactList,function(e,i){return n("Row",{key:i},[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"联系人",prop:"contactList."+i+".contact_name",rules:{required:!0,validator:t.valiName,trigger:"blur"}}},[n("Input",{staticStyle:{width:"auto"},attrs:{prefix:"ios-contact",placeholder:"请输入姓名"},model:{value:e.contact_name,callback:function(n){t.$set(e,"contact_name",n)},expression:"item.contact_name"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"手机号",prop:"contactList."+i+".contact_phone",rules:{required:!0,validator:t.valiPhone,trigger:"blur"}}},[n("Input",{staticStyle:{width:"auto"},attrs:{prefix:"md-phone-portrait",placeholder:"请输入手机号"},model:{value:e.contact_phone,callback:function(n){t.$set(e,"contact_phone",n)},expression:"item.contact_phone"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"2"}},[n("Button",{directives:[{name:"show",rawName:"v-show",value:t.formItem.contactList.length>1,expression:"formItem.contactList.length>1"}],attrs:{type:"text"},nativeOn:{click:function(e){t.delRows(i)}}},[t._v("删除")])],1)],1)}),t._v(" "),n("FormItem",[n("Row",[n("Col",{attrs:{span:"12"}},[n("Button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:t.handleAdd}},[t._v("增加联系人")])],1)],1)],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"8px"},attrs:{size:"large"},on:{click:function(e){t.resetf("formValidate")}}},[t._v("重置")])],1)],2)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(h,m,!1,function(t){n("S6rF")},"data-v-a208f2d6",null);e.default=f.exports}});