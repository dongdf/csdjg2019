webpackJsonp([16],{AmgT:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("G7MN"),i=s("giHb"),o=s("cPLa"),n={name:"caiji-manager",components:{productReport:a.a,no:o.a},data:()=>({rtotal:0,psize:100,pnumb:1,cjlist:[],keyword:""}),mounted(){this.getcjList()},methods:{change:function(t){console.log(t),this.pnumb=t,this.getcjList()},search(){this.pnumb=1,this.getcjList()},delcj(t){let e=this;this.$mymsg(i.a,{data:{message:"确定删除此条记录？"},methods:{onOk(){e.$http.get("financial/bbService/cjglDelete?qyId="+t.companyId).then(s=>{if(1!=s.data.code)e.$Message.error(s.data.msg);else{var a=e.cjlist.findIndex(function(e){return e.companyId==t.companyId});e.cjlist.splice(a,1)}})}}})},edit(t){let e=this;0==t.hasReport?e.$router.push({name:"grade",query:{edit:1,id:t.companyId,cur:1}}):this.$mymsg(i.a,{data:{message:"编辑企业会将企业已生成的报告删除，继续操作请点击[确定]"},methods:{onOk(){e.$http.get("financial/reportService/deleteReport?qyId="+t.companyId+"&year=2018").then(s=>{e.$router.push({name:"grade",query:{edit:1,id:t.companyId,cur:1}})})}}})},isEdit(){},getcjList(){this.$http.get("financial/bbService/cjglList?pageSize="+this.psize+"&pageNo="+this.pnumb+"&keywords="+this.keyword).then(t=>{this.cjlist=t.data.data.list,this.rtotal=t.data.data.total})},productIng(t){let e=this;this.$mymsg(a.a,{data:{message:"you click me btn1",qyId:t.companyId},methods:{onOk(){alert("回调")},onBuy(){e.$router.push({name:"miyaoMgr"})},updateList(){e.getcjList()},viewbb(){alert("回调")}}})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",{staticStyle:{"border-bottom":"2px solid #EEE","padding-bottom":"10px"}},[s("Col",{attrs:{span:"18"}},[s("div",{staticClass:"cpageTitle"},[s("Icon",{attrs:{size:"20",type:"ios-construct-outline"}}),s("span",[t._v("采集管理")])],1)]),t._v(" "),s("Col",{staticStyle:{"text-align":"right"},attrs:{span:"6"}},[s("Input",{attrs:{placeholder:"请输入公司名称"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[s("Icon",{attrs:{type:"ios-search"}})],1),t._v(" "),s("span",{attrs:{slot:"append"},slot:"append"},[s("Button",{attrs:{type:"primary"},on:{click:function(e){t.search()}}},[t._v("搜索")])],1)])],1)],1),t._v(" "),t._l(t.cjlist,function(e,a){return s("Row",{key:a,staticClass:"iv_row"},[s("Col",{attrs:{span:"1"}},[s("Icon",{staticStyle:{opacity:".2"},attrs:{size:"40",type:"ios-albums"}})],1),t._v(" "),s("Col",{attrs:{span:"8"}},[s("div",{staticClass:"iv_info"},[s("h3",[t._v(t._s(e.companyName))]),t._v(" "),s("p",[t._v(t._s(1==e.companyType?"企业会计准则企业":"小企业会计准则企业"))]),t._v(" "),s("p")])]),t._v(" "),s("Col",{attrs:{span:"9"}},[s("Row",{staticClass:"yearc",attrs:{type:"flex",justify:"center"}},t._l(e.uMap,function(e,a){return s("Col",{key:a,attrs:{span:"8"}},[s("div",{staticClass:"yearc_c"},[s("p",{staticClass:"t1"},[t._v(t._s(e.year)+"年度")]),t._v(" "),s("p",[s("Badge",{attrs:{status:"success",text:"已上传"+e.finish}})],1),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.total-e.finish!=0,expression:"(c.total - c.finish) != 0"}]},[s("Badge",{attrs:{status:"error",text:"未上传"+(e.total-e.finish)}})],1)])])}))],1),t._v(" "),s("Col",{attrs:{span:"6"}},[s("div",{staticClass:"edits"},[s("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(s){t.edit(e)}}},[t._v("编辑")]),t._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:0==e.hasReport,expression:"o.hasReport == 0"}],attrs:{type:"error",ghost:"",size:"small"},on:{click:function(s){t.delcj(e)}}},[t._v("删除")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.hasReport,expression:"o.hasReport"}],staticStyle:{color:"green"}},[s("Icon",{attrs:{type:"md-checkmark-circle-outline"}}),s("b",{staticStyle:{"font-weight":"normal"}},[t._v("报告已生成")])],1),t._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:!e.hasReport,expression:"!o.hasReport"}],attrs:{ghost:"",type:"success",size:"small",disabled:0!=e.requiredTotal,icon:"ios-hammer"},on:{click:function(s){t.productIng(e)}}},[t._v("生成报告")])],1)])],1)}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.cjlist.length>0,expression:"cjlist.length>0"}],staticClass:"pager"},[s("Page",{attrs:{total:t.rtotal,current:t.pnumb,"page-size":t.psize,"show-total":""},on:{"on-change":t.change}})],1),t._v(" "),s("no",{directives:[{name:"show",rawName:"v-show",value:0==t.cjlist.length,expression:"cjlist.length == 0"}],attrs:{tipText:"暂无记录"}})],2)},staticRenderFns:[]};var c=s("VU/8")(n,r,!1,function(t){s("JTaA")},"data-v-3972b22a",null);e.default=c.exports},JTaA:function(t,e){}});