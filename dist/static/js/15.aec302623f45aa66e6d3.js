webpackJsonp([15],{"F/0w":function(t,e){},cLuP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("afWL"),i=a("giHb"),n=a("qI5z"),r=a("cPLa"),o={name:"report-mgr",data:function(){return{value3:3,rtotal:0,psize:100,pnumb:1,keywords:"",repList:[],userinfo:{}}},components:{sendReport:s.a,no:r.a},mounted:function(){this.getreportList(),this.getuser()},methods:{getuser:function(){var t=this;this.$http.post("financial/userService/getCurUser").then(function(e){t.userinfo=e.data,t.userinfo.password||t.showtips()})},showtips:function(){var t=this;this.$mymsg(i.a,{data:{message:"您还没有设置密码，点击确定去设置"},methods:{onOk:function(){t.$router.push({name:"editPas"})}}})},searchcom:function(){this.pnumb=1,this.getreportList()},getreportList:function(){var t=this;this.$http.post("financial/reportService/reportList",{subData:{pageNum:this.pnumb,pageSize:this.psize,companyName:this.keywords}}).then(function(e){t.repList=e.data.data.list,t.rtotal=e.data.data.total})},delcj:function(t){var e=this;this.$mymsg(i.a,{data:{message:"确定删除此条报告吗？"},methods:{onOk:function(){e.$http.get("financial/reportService/deleteReport?qyId="+t.qy_id+"&year=2018").then(function(a){if(1!=a.data.code)e.$Message.error(a.data.msg);else{var s=e.repList.findIndex(function(e){return e.companyId==t.companyId});e.repList.splice(s,1)}})}}})},godata:function(t){window.open(n.b+"#/bbview/uploadData?edit=1&id="+t.qy_id+"&cur=1")},gozjDetail:function(t){var e=this;t.simple_summary_url?window.open(t.simple_summary_url):this.$http.get("financial/reportService/result2Html?type=2&year="+t.nf+"&companyId="+t.qy_id).then(function(a){if(1!=a.data.code)e.$Message.error(a.data.msg);else{var s=e.repList.findIndex(function(e){return e.qy_id==t.qy_id});e.repList[s].simple_summary_url=a.data.data,window.open(a.data.data)}})},godetail:function(t){var e=this;t.pc_url?window.open(t.pc_url):this.$http.get("financial/reportService/result2Html?type=0&year="+t.nf+"&companyId="+t.qy_id).then(function(a){if(1!=a.data.code)e.$Message.error(a.data.msg);else{var s=e.repList.findIndex(function(e){return e.qy_id==t.qy_id});e.repList[s].pc_url=a.data.data,window.open(a.data.data)}})},gosimpleDetail:function(t){var e=this;t.simple_url?window.open(t.simple_url):this.$http.get("financial/reportService/result2Html?type=1&year="+t.nf+"&companyId="+t.qy_id).then(function(a){if(1!=a.data.code)e.$Message.error(a.data.msg);else{var s=e.repList.findIndex(function(e){return e.qy_id==t.qy_id});e.repList[s].simple_url=a.data.data,window.open(a.data.data)}})},change:function(t){console.log(t),this.pnumb=t,this.getreportList()},sendMsg:function(t){this.$mymsg(s.a,{data:{message:"you click me btn1",cids:t.qy_id,sendurl:t.pc_url},methods:{onOk:function(){}}})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticStyle:{"border-bottom":"2px solid #EEE","padding-bottom":"10px"}},[a("Col",{attrs:{span:"18"}},[a("div",{staticClass:"cpageTitle"},[a("Icon",{attrs:{size:"20",type:"ios-document"}}),a("span",[t._v("报告查看")])],1)]),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"6"}},[a("Input",{attrs:{placeholder:"请输入公司名称"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[a("Icon",{attrs:{type:"ios-search"}})],1),t._v(" "),a("span",{attrs:{slot:"append"},slot:"append"},[a("Button",{attrs:{type:"primary"},on:{click:t.searchcom}},[t._v("搜索")])],1)])],1)],1),t._v(" "),t._l(t.repList,function(e,s){return a("Row",{key:s,staticClass:"iv_row"},[a("Col",{attrs:{span:"1"}},[a("Icon",{staticStyle:{opacity:".2"},attrs:{size:"40",type:"ios-document"}})],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"iv_info"},[a("h3",[t._v(t._s(e.report_name))]),t._v(" "),a("p",[t._v("公司名称："+t._s(e.company_name))]),t._v(" "),a("p")])]),t._v(" "),a("Col",{attrs:{span:"9"}},[a("Row",{staticClass:"yearc",attrs:{type:"flex",justify:"center"}},[a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"yearc_c"},[a("p",{staticClass:"t1"},[t._v("税负指标")]),t._v(" "),a("p",[a("Badge",{attrs:{status:"default",text:e.sf_value+"分"}})],1)])]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"yearc_c"},[a("p",{staticClass:"t1"},[t._v("税源指标")]),t._v(" "),a("p",[a("Badge",{attrs:{status:"default",text:e.sy_value+"分"}})],1)])]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"yearc_c"},[a("p",{staticClass:"t1"},[t._v("项目指标")]),t._v(" "),a("p",[a("Badge",{attrs:{status:"default",text:e.xm_value+"分"}})],1)])]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"yearc_c"},[a("p",{staticClass:"t1"},[t._v("税收风险")]),t._v(" "),a("p",{},[a("Badge",{directives:[{name:"show",rawName:"v-show",value:e.zh_pf<=3,expression:"r.zh_pf<=3"}],attrs:{status:"success",text:"一级"}}),t._v(" "),a("Badge",{directives:[{name:"show",rawName:"v-show",value:e.zh_pf>3&&e.zh_pf<=7,expression:"r.zh_pf>3 && r.zh_pf<=7"}],attrs:{status:"warning",text:"二级"}}),t._v(" "),a("Badge",{directives:[{name:"show",rawName:"v-show",value:e.zh_pf>7,expression:"r.zh_pf>7"}],attrs:{status:"error",text:"三级"}})],1)])])],1)],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"edits"},[a("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(a){t.godetail(e)}}},[t._v("报告详情")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(a){t.gosimpleDetail(e)}}},[t._v("简要报告")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(a){t.gozjDetail(e)}}},[t._v("总结报告")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(a){t.godata(e)}}},[t._v("数据源")])],1)])],1)}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.repList.length>0,expression:"repList.length >0 "}],staticClass:"pager"},[a("Page",{attrs:{total:t.rtotal,current:t.pnumb,"page-size":t.psize,"show-total":""},on:{"on-change":t.change}})],1),t._v(" "),a("no",{directives:[{name:"show",rawName:"v-show",value:0==t.repList.length,expression:"repList.length == 0"}],attrs:{tipText:"暂无记录"}})],2)},staticRenderFns:[]};var c=a("VU/8")(o,p,!1,function(t){a("F/0w")},"data-v-6abc0259",null);e.default=c.exports}});