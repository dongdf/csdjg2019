webpackJsonp([9],{"9Xvl":function(t,e,i){"use strict";e.b=function(t,e){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1},i.d(e,"a",function(){return n});const a=i("7+uW").default.prototype.$isServer;!a&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver);function n(t,e,i){i="string"==typeof e?[e]:e;let a=t.$parent,n=a.$options.name;for(;a&&(!n||i.indexOf(n)<0);)(a=a.$parent)&&(n=a.$options.name);return a}},S6rF:function(t,e){},VrLL:function(t,e,i){"use strict";var a=i("9Xvl");const n="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",s=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let r,o={};function l(t,e=null,i=null,a=!1){r||(r=document.createElement("textarea"),document.body.appendChild(r)),t.getAttribute("wrap")?r.setAttribute("wrap",t.getAttribute("wrap")):r.removeAttribute("wrap");let{paddingSize:l,borderSize:c,boxSizing:u,sizingStyle:p}=function(t,e=!1){const i=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&o[i])return o[i];const a=window.getComputedStyle(t),n=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),r=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),l=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),c={sizingStyle:s.map(t=>`${t}:${a.getPropertyValue(t)}`).join(";"),paddingSize:r,borderSize:l,boxSizing:n};return e&&i&&(o[i]=c),c}(t,a);r.setAttribute("style",`${p};${n}`),r.value=t.value||t.placeholder||"";let d,h=Number.MIN_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,f=r.scrollHeight;if("border-box"===u?f+=c:"content-box"===u&&(f-=l),null!==e||null!==i){r.value=" ";let t=r.scrollHeight-l;null!==e&&(h=t*e,"border-box"===u&&(h=h+l+c),f=Math.max(h,f)),null!==i&&(m=t*i,"border-box"===u&&(m=m+l+c),d=f>m?"":"hidden",f=Math.min(m,f))}return i||(d="hidden"),{height:`${f}px`,minHeight:`${h}px`,maxHeight:`${m}px`,overflowY:d}}const c="ivu-input";var u={name:"Input",mixins:[{methods:{dispatch(t,e,i){let a=this.$parent||this.$root,n=a.$options.name;for(;a&&(!n||n!==t);)(a=a.$parent)&&(n=a.$options.name);a&&a.$emit.apply(a,[e].concat(i))},broadcast(t,e,i){(function t(e,i,a){this.$children.forEach(n=>{n.$options.name===e?n.$emit.apply(n,[i].concat(a)):t.apply(n,[e,i].concat([a]))})}).call(this,t,e,i)}}}],props:{type:{validator:t=>Object(a.b)(t,["text","textarea","password","url","email","date"]),default:"text"},value:{type:[String,Number],default:""},size:{validator:t=>Object(a.b)(t,["small","large","default"]),default(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},placeholder:{type:String,default:""},maxlength:{type:Number},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{validator:t=>Object(a.b)(t,["on","off"]),default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator:t=>Object(a.b)(t,["hard","soft"]),default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1}},data(){return{currentValue:this.value,prefixCls:c,prepend:!0,append:!0,slotReady:!1,textareaStyles:{},showPrefix:!1,showSuffix:!1}},computed:{wrapClasses(){return["ivu-input-wrapper",{[`ivu-input-wrapper-${this.size}`]:!!this.size,"ivu-input-type":this.type,"ivu-input-group":this.prepend||this.append||this.search&&this.enterButton,[`ivu-input-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,"ivu-input-group-with-prepend":this.prepend,"ivu-input-group-with-append":this.append||this.search&&this.enterButton,"ivu-input-hide-icon":this.append,"ivu-input-with-search":this.search&&this.enterButton}]},inputClasses(){return["ivu-input",{[`ivu-input-${this.size}`]:!!this.size,"ivu-input-disabled":this.disabled,"ivu-input-with-prefix":this.showPrefix,"ivu-input-with-suffix":this.showSuffix||this.search&&!1===this.enterButton}]},textareaClasses(){return["ivu-input",{"ivu-input-disabled":this.disabled}]}},methods:{handleEnter(t){this.$emit("on-enter",t),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(t){this.$emit("on-keydown",t)},handleKeypress(t){this.$emit("on-keypress",t)},handleKeyup(t){this.$emit("on-keyup",t)},handleIconClick(t){this.$emit("on-click",t)},handleFocus(t){this.$emit("on-focus",t)},handleBlur(t){this.$emit("on-blur",t),Object(a.a)(this,["DatePicker","TimePicker","Cascader","Search"])||this.dispatch("FormItem","on-form-blur",this.currentValue)},handleInput(t){let e=t.target.value;this.number&&""!==e&&(e=Number.isNaN(Number(e))?e:Number(e)),this.$emit("input",e),this.setCurrentValue(e),this.$emit("on-change",t)},handleChange(t){this.$emit("on-input-change",t)},setCurrentValue(t){t!==this.currentValue&&(this.$nextTick(()=>{this.resizeTextarea()}),this.currentValue=t,Object(a.a)(this,["DatePicker","TimePicker","Cascader","Search"])||this.dispatch("FormItem","on-form-change",t))},resizeTextarea(){const t=this.autosize;if(!t||"textarea"!==this.type)return!1;const e=t.minRows,i=t.maxRows;this.textareaStyles=l(this.$refs.textarea,e,i)},focus(){"textarea"===this.type?this.$refs.textarea.focus():this.$refs.input.focus()},blur(){"textarea"===this.type?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){this.$emit("input",""),this.setCurrentValue(""),this.$emit("on-change",{target:{value:""}})},handleSearch(){if(this.disabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)}},watch:{value(t){this.setCurrentValue(t)}},mounted(){"textarea"!==this.type?(this.prepend=void 0!==this.$slots.prepend,this.append=void 0!==this.$slots.append,this.showPrefix=""!==this.prefix||void 0!==this.$slots.prefix,this.showSuffix=""!==this.suffix||void 0!==this.$slots.suffix):(this.prepend=!1,this.append=!1),this.slotReady=!0,this.resizeTextarea()}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.wrapClasses},["textarea"!==t.type?[t.prepend?i("div",{directives:[{name:"show",rawName:"v-show",value:t.slotReady,expression:"slotReady"}],class:[t.prefixCls+"-group-prepend"]},[t._t("prepend")],2):t._e(),t._v(" "),t.clearable&&t.currentValue?i("i",{staticClass:"ivu-icon",class:["ivu-icon-ios-close-circle",t.prefixCls+"-icon",t.prefixCls+"-icon-clear",t.prefixCls+"-icon-normal"],on:{click:t.handleClear}}):t.icon?i("i",{staticClass:"ivu-icon",class:["ivu-icon-"+t.icon,t.prefixCls+"-icon",t.prefixCls+"-icon-normal"],on:{click:t.handleIconClick}}):t.search&&!1===t.enterButton?i("i",{staticClass:"ivu-icon ivu-icon-ios-search",class:[t.prefixCls+"-icon",t.prefixCls+"-icon-normal",t.prefixCls+"-search-icon"],on:{click:t.handleSearch}}):t.showSuffix?i("span",{staticClass:"ivu-input-suffix"},[t._t("suffix",[t.suffix?i("i",{staticClass:"ivu-icon",class:["ivu-icon-"+t.suffix]}):t._e()])],2):t._e(),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.icon?t._e():i("i",{staticClass:"ivu-icon ivu-icon-ios-loading ivu-load-loop",class:[t.prefixCls+"-icon",t.prefixCls+"-icon-validate"]})]),t._v(" "),i("input",{ref:"input",class:t.inputClasses,attrs:{id:t.elementId,autocomplete:t.autocomplete,spellcheck:t.spellcheck,type:t.type,placeholder:t.placeholder,disabled:t.disabled,maxlength:t.maxlength,readonly:t.readonly,name:t.name,number:t.number,autofocus:t.autofocus},domProps:{value:t.currentValue},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleEnter(e):null},t.handleKeyup],keypress:t.handleKeypress,keydown:t.handleKeydown,focus:t.handleFocus,blur:t.handleBlur,input:t.handleInput,change:t.handleChange}}),t._v(" "),t.append?i("div",{directives:[{name:"show",rawName:"v-show",value:t.slotReady,expression:"slotReady"}],class:[t.prefixCls+"-group-append"]},[t._t("append")],2):t.search&&t.enterButton?i("div",{class:[t.prefixCls+"-group-append",t.prefixCls+"-search"],on:{click:t.handleSearch}},[!0===t.enterButton?i("i",{staticClass:"ivu-icon ivu-icon-ios-search"}):[t._v(t._s(t.enterButton))]],2):t.showPrefix?i("span",{staticClass:"ivu-input-prefix"},[t._t("prefix",[t.prefix?i("i",{staticClass:"ivu-icon",class:["ivu-icon-"+t.prefix]}):t._e()])],2):t._e()]:i("textarea",{ref:"textarea",class:t.textareaClasses,style:t.textareaStyles,attrs:{id:t.elementId,wrap:t.wrap,autocomplete:t.autocomplete,spellcheck:t.spellcheck,placeholder:t.placeholder,disabled:t.disabled,rows:t.rows,maxlength:t.maxlength,readonly:t.readonly,name:t.name,autofocus:t.autofocus},domProps:{value:t.currentValue},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleEnter(e):null},t.handleKeyup],keypress:t.handleKeypress,keydown:t.handleKeydown,focus:t.handleFocus,blur:t.handleBlur,input:t.handleInput}})],2)},staticRenderFns:[]},d=i("VU/8")(u,p,!1,null,null,null);e.a=d.exports},mYSg:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return["ivu-icon",{[`ivu-icon-${this.type}`]:""!==this.type,[`${this.custom}`]:""!==this.custom}]},styles(){let t={};return this.size&&(t["font-size"]=`${this.size}px`),this.color&&(t.color=this.color),t}},methods:{handleClick(t){this.$emit("click",t)}}},n={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:this.classes,style:this.styles,on:{click:this.handleClick}})},staticRenderFns:[]},s=i("VU/8")(a,n,!1,null,null,null).exports,r=i("9Xvl");var o={name:"Button",mixins:[{props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator:t=>Object(r.b)(t,["_blank","_self","_parent","_top"]),default:"_self"}},computed:{linkUrl(){return"string"===typeof this.to?this.to:null}},methods:{handleClick(t=!1){if(t)window.open(this.to);else{this.$router?this.replace?this.$router.replace(this.to):this.$router.push(this.to):window.location.href=this.to}},handleCheckClick(t,e=!1){if(this.to){if("_blank"===this.target)return!1;t.preventDefault(),this.handleClick(e)}}}}],components:{Icon:s},props:{type:{validator:t=>Object(r.b)(t,["default","primary","dashed","text","info","success","warning","error"]),default:"default"},shape:{validator:t=>Object(r.b)(t,["circle","circle-outline"])},size:{validator:t=>Object(r.b)(t,["small","large","default"]),default(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator:t=>Object(r.b)(t,["button","submit","reset"])},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},data:()=>({showSlot:!0}),computed:{classes(){return["ivu-btn",`ivu-btn-${this.type}`,{"ivu-btn-long":this.long,[`ivu-btn-${this.shape}`]:!!this.shape,[`ivu-btn-${this.size}`]:"default"!==this.size,"ivu-btn-loading":null!=this.loading&&this.loading,"ivu-btn-icon-only":!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),"ivu-btn-ghost":this.ghost}]}},methods:{handleClickLink(t,e=!1){this.$emit("click",t),this.handleCheckClick(t,e)}},mounted(){this.showSlot=void 0!==this.$slots.default}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.to?i("a",{class:t.classes,attrs:{disabled:t.disabled,href:t.linkUrl,target:t.target},on:{click:[function(e){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;t.handleClickLink(e,!1)},function(e){if(!e.ctrlKey)return null;t.handleClickLink(e,!0)},function(e){if(!e.metaKey)return null;t.handleClickLink(e,!0)}]}},[t.loading?i("Icon",{staticClass:"ivu-load-loop",attrs:{type:"ios-loading"}}):t._e(),t._v(" "),!t.icon&&!t.customIcon||t.loading?t._e():i("Icon",{attrs:{type:t.icon,custom:t.customIcon}}),t._v(" "),t.showSlot?i("span",{ref:"slot"},[t._t("default")],2):t._e()],1):i("button",{class:t.classes,attrs:{type:t.htmlType,disabled:t.disabled},on:{click:t.handleClickLink}},[t.loading?i("Icon",{staticClass:"ivu-load-loop",attrs:{type:"ios-loading"}}):t._e(),t._v(" "),!t.icon&&!t.customIcon||t.loading?t._e():i("Icon",{attrs:{type:t.icon,custom:t.customIcon}}),t._v(" "),t.showSlot?i("span",{ref:"slot"},[t._t("default")],2):t._e()],1)},staticRenderFns:[]},c=i("VU/8")(o,l,!1,null,null,null).exports,u=i("jtoP"),p={components:{Input:i("VrLL").a,Button:c},data:()=>({res_s:[],openType:"",valiName:"",valiCompany:"",valiCity:[],valiPhone:"",valiArea:"",valiHangye:"",formItem:{companyName:"",areas:"",selectHy:"",companyKjzz:"",companyFlag:"",contactList:[{contact_name:"",contact_name:""}]},pselectedTree:{},ruleValidate:{companyKjzz:[{required:!0,message:"请选择会计准则",trigger:"blur"}],companyFlag:[{required:!0,message:"请选择企业规模",trigger:"blur"}]}}),mounted(){let t=this;this.valiName=function(t,e,i){if(!e.trim())return i(new Error("请输入姓名"));i()},this.valiPhone=function(t,e,i){return e?/^(((14[0-9]{1})|(13[0-9]{1})|(16[0-9]{1})|(19[0-9]{1})|(17[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(e)?void i():i(new Error("请正确的手机号")):i(new Error("请输入手机号"))},this.valiCompany=function(t,e,i){if(!e.trim())return i(new Error("请输入公司名称"));i()},this.valiArea=function(e,i,a){if(0==t.res_s.length)return a(new Error("请选择公司所在地区"));a()},this.valiHangye=function(e,i,a){if(!t.selectHy)return a(new Error("请选择公司行业"));a()}},methods:{chooseTree(){let t=this;this.$mymsg(u.a,{data:{message:"编辑企业会将企业已生成的报告删除，继续操作请点击[确定]"},methods:{onOk(){t.pselectedTree=this.selectedTree,t.selectHy=this.selectedTree}}})},resetf(t){this.formItem={companyName:"",companyKjzz:"",contactList:[{contact_name:"",contact_name:""}]},this.$refs[t].resetFields()},handleSubmit(t){this.$refs[t].validate(t=>{t?this.$http.post("financial/companyService/addCompany",{subData:{company_name:this.formItem.companyName,accountant_rule:this.formItem.companyKjzz,contactList:this.formItem.contactList,industry_id:this.pselectedTree.id,company_flag:this.formItem.companyFlag,area1:this.res_s[0].code,area2:this.res_s[1].code}}).then(t=>{this.$Message.success("保存成功!"),this.formItem={companyName:"",companyKjzz:"",contactList:[{contact_name:"",contact_name:""}]}}):this.$Message.error("提交失败，请查看原因!")})},handleAdd(){this.formItem.contactList.push({contact_name:"",contact_phone:""})},delRows(t){this.formItem.contactList.splice(t,1)}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",{staticStyle:{"border-bottom":"2px solid #EEE","padding-bottom":"10px"}},[i("Col",{attrs:{span:"18"}},[i("div",{staticClass:"cpageTitle"},[i("Icon",{attrs:{size:"20",type:"md-add"}}),i("span",[t._v("添加企业")])],1)]),t._v(" "),i("Col",{staticStyle:{"text-align":"right"},attrs:{span:"6"}})],1),t._v(" "),i("div",{staticClass:"formdata"},[i("Form",{ref:"formValidate",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":80}},[i("FormItem",{attrs:{label:"企业名称",prop:"companyName",rules:{required:!0,validator:t.valiCompany,trigger:"blur"}}},[i("Input",{attrs:{placeholder:"请输入企业名称"},model:{value:t.formItem.companyName,callback:function(e){t.$set(t.formItem,"companyName",e)},expression:"formItem.companyName"}})],1),t._v(" "),i("FormItem",{attrs:{label:"会计准则",prop:"companyKjzz"}},[i("Select",{model:{value:t.formItem.companyKjzz,callback:function(e){t.$set(t.formItem,"companyKjzz",e)},expression:"formItem.companyKjzz"}},[i("Option",{attrs:{value:"1"}},[t._v("企业会计准则企业")]),t._v(" "),i("Option",{attrs:{value:"2"}},[t._v("小企业会计准则企业")])],1)],1),t._v(" "),i("FormItem",{attrs:{label:"企业规模",prop:"companyFlag"}},[i("Select",{model:{value:t.formItem.companyFlag,callback:function(e){t.$set(t.formItem,"companyFlag",e)},expression:"formItem.companyFlag"}},[i("Option",{attrs:{value:"1"}},[t._v("一般纳税人")]),t._v(" "),i("Option",{attrs:{value:"2"}},[t._v("小规模")])],1)],1),t._v(" "),i("FormItem",{attrs:{label:"所属地区",prop:"areas",rules:{required:!0,validator:t.valiArea,trigger:"blur"}}},[i("al-cascader",{attrs:{level:"1"},model:{value:t.res_s,callback:function(e){t.res_s=e},expression:"res_s"}})],1),t._v(" "),i("FormItem",{attrs:{label:"所属行业",prop:"selectHy",rules:{required:!0,validator:t.valiHangye,trigger:"blur"}}},[i("Button",{nativeOn:{click:function(e){return t.chooseTree(e)}}},[t._v("点击选择")]),i("span",[i("b",{staticStyle:{color:"#08F","margin-left":"10px"}},[t._v(t._s(t.pselectedTree.name?t.pselectedTree.name:""))]),t._v("  "),i("i",{staticStyle:{"font-weight":"normal",color:"#CCC"}},[t._v("选择行业计算更精准")])])],1),t._v(" "),t._l(t.formItem.contactList,function(e,a){return i("Row",{key:a},[i("Col",{attrs:{span:"11"}},[i("FormItem",{attrs:{label:"联系人",prop:"contactList."+a+".contact_name",rules:{required:!0,validator:t.valiName,trigger:"blur"}}},[i("Input",{staticStyle:{width:"auto"},attrs:{prefix:"ios-contact",placeholder:"请输入姓名"},model:{value:e.contact_name,callback:function(i){t.$set(e,"contact_name",i)},expression:"item.contact_name"}})],1)],1),t._v(" "),i("Col",{attrs:{span:"11"}},[i("FormItem",{attrs:{label:"手机号",prop:"contactList."+a+".contact_phone",rules:{required:!0,validator:t.valiPhone,trigger:"blur"}}},[i("Input",{staticStyle:{width:"auto"},attrs:{prefix:"md-phone-portrait",placeholder:"请输入手机号"},model:{value:e.contact_phone,callback:function(i){t.$set(e,"contact_phone",i)},expression:"item.contact_phone"}})],1)],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Button",{directives:[{name:"show",rawName:"v-show",value:t.formItem.contactList.length>1,expression:"formItem.contactList.length>1"}],attrs:{type:"text"},nativeOn:{click:function(e){t.delRows(a)}}},[t._v("删除")])],1)],1)}),t._v(" "),i("FormItem",[i("Row",[i("Col",{attrs:{span:"12"}},[i("Button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:t.handleAdd}},[t._v("增加联系人")])],1)],1)],1),t._v(" "),i("FormItem",[i("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),t._v(" "),i("Button",{staticStyle:{"margin-left":"8px"},attrs:{size:"large"},on:{click:function(e){t.resetf("formValidate")}}},[t._v("重置")])],1)],2)],1)],1)},staticRenderFns:[]};var h=i("VU/8")(p,d,!1,function(t){i("S6rF")},"data-v-a208f2d6",null);e.default=h.exports}});